# HTTP 代理端口
port: 7890

# SOCKS5 代理端口
socks-port: 7891

# Linux 和 macOS 的 redir 代理端口
redir-port: 7892

# 允许局域网的连接
allow-lan: true

# 规则模式：Rule（规则） / Global（全局代理）/ Direct（全局直连）
mode: Rule

# 设置日志输出级别 (默认级别：silent，即不输出任何内容，以避免因日志内容过大而导致程序内存溢出）。
# 5 个级别：silent / info / warning / error / debug。级别越高日志输出量越大，越倾向于调试，若需要请自行开启。
log-level: info
# Clash 的 RESTful API
external-controller: "0.0.0.0:9090"

# RESTful API 的口令
secret: ""

# 您可以将静态网页资源（如 clash-dashboard）放置在一个目录中，clash 将会服务于 `RESTful API/ui`
# 参数应填写配置目录的相对路径或绝对路径。
# external-ui: folder

dns:
  enable: true
  ipv6: false
  listen: 0.0.0.0:53
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  nameserver:
    - 223.5.5.5
    - 8.8.8.8
    - 119.29.29.29
    - 1.0.0.1

  fallback:
    - https://dns.google/dns-query
    - https://doh.opendns.com/dns-query
    - https://doh.pub/dns-query
    - tls://dns.google
  fallback-filter:
    geoip: true
    ipcidr:
      - 240.0.0.0/4

# Clash DNS 请求逻辑：
# (1) 当访问一个域名时， nameserver 与 fallback 列表内的所有服务器并发请求，得到域名对应的 IP 地址。
# (2) clash 将选取 nameserver 列表内，解析最快的结果。
# (3) 若解析结果中，IP 地址属于 国外，那么 Clash 将选择 fallback 列表内，解析最快的结果。

# 注意：
# (1) 如果您为了确保 DNS 解析结果无污染，请仅保留列表内以 tls:// 开头的 DNS 服务器，但是通常对于国内没有太大必要。
# (2) 如果您不在乎可能解析到污染的结果，更加追求速度。请将 nameserver 列表的服务器插入至 fallback 列表内，并移除重复项。

  # 规则
rules:
  # 广告禁止
  - DOMAIN-SUFFIX,access-sngapm.qcloud.com, ⛔️ 广告拦截

  # 直连
  - DOMAIN-SUFFIX,tsinghua.edu.cn,🔰 国内直连
  - DOMAIN-SUFFIX,doubanio.com,🔰 国内直连
  - DOMAIN-SUFFIX,aliyun.com,🔰 国内直连
  - DOMAIN-SUFFIX,edu.cn,🔰 国内直连
  - DOMAIN-SUFFIX,translate.googleapis.com,🔰 国内直连
  - DOMAIN-SUFFIX,battle.net,🔰 国内直连
  - DOMAIN-SUFFIX,gov.cn,🔰 国内直连

  # 出国起飞
  - DOMAIN-SUFFIX,facebook.com,✈️ 起飞出国
  - DOMAIN-SUFFIX,v2ex.com,✈️ 起飞出国
  - DOMAIN-SUFFIX,hk1lib.org,✈️ 起飞出国
  - DOMAIN-SUFFIX,z-lib.org,✈️ 起飞出国
  - DOMAIN-SUFFIX,hk1lib.org,✈️ 起飞出国
  - DOMAIN-SUFFIX,sg1lib.org,✈️ 起飞出国
  - DOMAIN-SUFFIX,zlibcdn.com,✈️ 起飞出国
  - DOMAIN-SUFFIX,apps.apple.com,✈️ 起飞出国
  - DOMAIN-SUFFIX,notion.so,✈️ 起飞出国
  - DOMAIN-SUFFIX,deepl.com,✈️ 起飞出国
  - DOMAIN-SUFFIX,raindrop.io,✈️ 起飞出国
  - DOMAIN-SUFFIX,adguard.com,✈️ 起飞出国

#   # 订阅规则
#   - RULE-SET,AdBlock,⛔️ 广告拦截
#   - RULE-SET,reject_list,⛔️ 广告拦截
#   - RULE-SET,Apple,🔰 国内直连
#   - RULE-SET,Tencent,🔰 国内直连
#   - RULE-SET,Microsoft,🔰 国内直连
#   - RULE-SET,China,🔰 国内直连
#   - RULE-SET,direct_list,🔰 国内直连
#   - RULE-SET,🎦 Netflix,🎦 Netflix
#   - RULE-SET,Adobe,✈️ 起飞出国
#   - RULE-SET,Amazon,✈️ 起飞出国
#   - RULE-SET,Dler,✈️ 起飞出国
#   - RULE-SET,Facebook,✈️ 起飞出国
#   - RULE-SET,GitHub,✈️ 起飞出国
#   - RULE-SET,Google,✈️ 起飞出国
#   - RULE-SET,Speedtest,✈️ 起飞出国
#   - RULE-SET,Steam,✈️ 起飞出国
#   - RULE-SET,Spotify,✈️ 起飞出国
#   - RULE-SET,Telegram,✈️ 起飞出国
#   - RULE-SET,Twitter,✈️ 起飞出国
#   - RULE-SET,YouTube,✈️ 起飞出国
#   - RULE-SET,PayPal,✈️ 起飞出国
#   - RULE-SET,Proxy,✈️ 起飞出国
#   - RULE-SET,proxy_list,✈️ 起飞出国
#   - RULE-SET,gfw_list,✈️ 起飞出国
#   - RULE-SET,greatfire_list,✈️ 起飞出国

# rule-providers:
#   AdBlock:
#     {
#       type: http,
#       behavior: classical,
#       path: ./Filter/AdBlock,
#       url: https://cdn.jsdelivr.net/gh/Semporia/Clash-X@master/Filter/AdBlock.yaml,
#       interval: 3600,
#     }
#   Apple:
#     {
#       type: http,
#       behavior: classical,
#       path: ./Filter/Apple,
#       url: https://cdn.jsdelivr.net/gh/Semporia/Clash-X@master/Filter/Apple.yaml,
#       interval: 3600,
#     }
#   Adobe:
#     {
#       type: http,
#       behavior: classical,
#       path: ./Filter/Adobe,
#       url: https://cdn.jsdelivr.net/gh/Semporia/Clash-X@master/Filter/Adobe.yaml,
#       interval: 3600,
#     }
#   Amazon:
#     {
#       type: http,
#       behavior: classical,
#       path: ./Filter/Amazon,
#       url: https://cdn.jsdelivr.net/gh/Semporia/Clash-X@master/Filter/Amazon.yaml,
#       interval: 3600,
#     }

#   China:
#     {
#       type: http,
#       behavior: classical,
#       path: ./Filter/China,
#       url: https://cdn.jsdelivr.net/gh/Semporia/Clash-X@master/Filter/China.yaml,
#       interval: 3600,
#     }

#   Dler:
#     {
#       type: http,
#       behavior: classical,
#       path: ./Filter/Dler,
#       url: https://cdn.jsdelivr.net/gh/Semporia/Clash-X@master/Filter/Dler.yaml,
#       interval: 3600,
#     }

#   Facebook:
#     {
#       type: http,
#       behavior: classical,
#       path: ./Filter/Facebook,
#       url: https://cdn.jsdelivr.net/gh/Semporia/Clash-X@master/Filter/Facebook.yaml,
#       interval: 3600,
#     }

#   GitHub:
#     {
#       type: http,
#       behavior: classical,
#       path: ./Filter/GitHub,
#       url: https://cdn.jsdelivr.net/gh/Semporia/Clash-X@master/Filter/GitHub.yaml,
#       interval: 3600,
#     }
#   Google:
#     {
#       type: http,
#       behavior: classical,
#       path: ./Filter/Google,
#       url: https://cdn.jsdelivr.net/gh/Semporia/Clash-X@master/Filter/Google.yaml,
#       interval: 3600,
#     }

#   Microsoft:
#     {
#       type: http,
#       behavior: classical,
#       path: ./Filter/Microsoft,
#       url: https://cdn.jsdelivr.net/gh/Semporia/Clash-X@master/Filter/Microsoft.yaml,
#       interval: 3600,
#     }

#   🎦 Netflix:
#     {
#       type: http,
#       behavior: classical,
#       path: ./Filter/Netflix,
#       url: https://cdn.jsdelivr.net/gh/Semporia/Clash-X@master/Filter/Netflix.yaml,
#       interval: 3600,
#     }

#   Spotify:
#     {
#       type: http,
#       behavior: classical,
#       path: ./Filter/Spotify,
#       url: https://cdn.jsdelivr.net/gh/Semporia/Clash-X@master/Filter/Spotify.yaml,
#       interval: 3600,
#     }
#   Speedtest:
#     {
#       type: http,
#       behavior: classical,
#       path: ./Filter/Speedtest,
#       url: https://cdn.jsdelivr.net/gh/Semporia/Clash-X@master/Filter/Speedtest.yaml,
#       interval: 3600,
#     }
#   Steam:
#     {
#       type: http,
#       behavior: classical,
#       path: ./Filter/Steam,
#       url: https://cdn.jsdelivr.net/gh/Semporia/Clash-X@master/Filter/Steam.yaml,
#       interval: 3600,
#     }

#   Telegram:
#     {
#       type: http,
#       behavior: classical,
#       path: ./Filter/Telegram,
#       url: https://cdn.jsdelivr.net/gh/Semporia/Clash-X@master/Filter/Telegram.yaml,
#       interval: 3600,
#     }
#   Twitter:
#     {
#       type: http,
#       behavior: classical,
#       path: ./Filter/Twitter,
#       url: https://cdn.jsdelivr.net/gh/Semporia/Clash-X@master/Filter/Twitter.yaml,
#       interval: 3600,
#     }
#   Tencent:
#     {
#       type: http,
#       behavior: classical,
#       path: ./Filter/Tencent,
#       url: https://cdn.jsdelivr.net/gh/Semporia/Clash-X@master/Filter/Tencent.yaml,
#       interval: 3600,
#     }

#   YouTube:
#     {
#       type: http,
#       behavior: classical,
#       path: ./Filter/YouTube,
#       url: https://cdn.jsdelivr.net/gh/Semporia/Clash-X@master/Filter/YouTube.yaml,
#       interval: 3600,
#     }

#   PayPal:
#     {
#       type: http,
#       behavior: classical,
#       path: ./Filter/PayPal,
#       url: https://cdn.jsdelivr.net/gh/Semporia/Clash-X@master/Filter/PayPal.yaml,
#       interval: 3600,
#     }
#   Proxy:
#     {
#       type: http,
#       behavior: classical,
#       path: ./Filter/Proxy,
#       url: https://cdn.jsdelivr.net/gh/Semporia/Clash-X@master/Filter/Proxy.yaml,
#       interval: 3600,
#     }
#   direct_list:
#     {
#       type: http,
#       behavior: domain,
#       path: ./Filter/direct_list,
#       url: https://ghproxy.com/https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/direct.txt,
#       interval: 3600,
#     }
#   proxy_list:
#     {
#       type: http,
#       behavior: domain,
#       path: ./Filter/proxy_list,
#       url: https://ghproxy.com/https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/proxy.txt,
#       interval: 3600,
#     }
#   gfw_list:
#     {
#       type: http,
#       behavior: domain,
#       path: ./Filter/gfw_list,
#       url: https://ghproxy.com/https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/gfw.txt,
#       interval: 3600,
#     }
#   greatfire_list:
#     {
#       type: http,
#       behavior: domain,
#       path: ./Filter/greatfire_list,
#       url: https://ghproxy.com/https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/greatfire.txt,
#       interval: 3600,
#     }
#   reject_list:
#     {
#       type: http,
#       behavior: domain,
#       path: ./Filter/reject_list,
#       url: https://ghproxy.com/https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/reject.txt,
#       interval: 3600,
#     }
